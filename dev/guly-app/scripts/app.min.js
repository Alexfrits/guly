function JSON_CALLBACK(){}var gulyApp=window.angular.module("gulyApp",["LocalStorageModule","ngRoute","ngAnimate","mainNavModule","waterMeterModule","pagesViewControllers","formControllers","switchControllers","gulyFiltersModule","weatherControllers","weatherServices","tc.chartjs","slick","sharingModule"]),pagesViewControllers=angular.module("pagesViewControllers",[]),formControllers=angular.module("formControllers",[]),mainNavModule=angular.module("mainNavModule",[]),waterMeterModule=angular.module("waterMeterModule",["gooeyMenuModule"]),gooeyMenuModule=angular.module("gooeyMenuModule",[]),gulyFiltersModule=angular.module("gulyFiltersModule",[]),weatherControllers=angular.module("weatherControllers",[]),weatherServices=angular.module("weatherServices",[]),sharingModule=angular.module("sharingModule",[]);gulyApp.config(["$routeProvider",function(e){e.when("/water-tracker",{templateUrl:"partials/water-tracker.html",controller:"WaterTrackerCtrl"}).when("/profil",{templateUrl:"partials/profil.html",controller:"ProfileCtrl"}).when("/water-need",{templateUrl:"partials/water-need.html",controller:"wnCtrl"}).when("/statistiques",{templateUrl:"partials/statistiques.html",controller:"StatsCtrl"}).when("/astuces",{templateUrl:"partials/astuces.html",controller:"AstucesCtrl"}).when("/faq",{templateUrl:"partials/faq.html",controller:"FaqCtrl"}).when("/boutique",{templateUrl:"partials/boutique.html",controller:"ShopCtrl"}).when("/weather-test",{templateUrl:"partials/weather-test.html",controller:"WeatherCtrl"}).otherwise({redirectTo:"/water-tracker"})}]).config(["localStorageServiceProvider",function(e){e.setPrefix("guly").setStorageType("localStorage").setNotify(!0,!0)}]).run(["$location","localStorageService",function(e,t){var r=t.get("logged");r||e.url("/profil")}]),gulyApp.controller("storageCtrl",["$scope","localStorageService",function(e,t){function r(t){var r=parseInt(e.weight),o=38,l=900/65*r;return wnResult=r*o-l,wnResult}e.nickname=t.get("nickname"),e.weight=t.get("weight"),e.notif=null!==t.get("notif")?t.get("notif"):!0,e.sport=null!==t.get("sport")?t.get("sport"):!1,e.smart=null!==t.get("smart")?t.get("smart"):!1,e.wnResult=r(),e.$watch(function(o){t.set("nickname",o.nickname),e.nicknameVal=t.get("nickname"),t.set("weight",o.weight),e.weightVal=t.get("weight"),t.set("notif",o.notif),e.notifVal=t.get("notif"),t.set("smart",o.smart),e.smartVal=t.get("smart"),t.set("wnResult",r()),e.wnResultVal=t.get("wnResult")})}]),gulyApp.controller("wnCtrl",["$scope","localStorageService",function(e,t){console.log("wnCtrl");var r=parseInt(e.weight),o=38,l=r*(900/65),n=null!==t.get("wnToDrink")?t.get("wnToDrink"):!1;e.wnResult=r*o-l,t.set("wnResult",e.wnResult),null==n&&t.set("wnToDrink",e.wnResult)}]),pagesViewControllers.controller("WaterTrackerCtrl",["$scope",function(e){e.pageClass="tracker"}]).controller("ProfileCtrl",["$scope",function(e){e.pageClass="profil"}]).controller("wnCtrl",["$scope",function(e){e.pageClass="water-need"}]).controller("StatsCtrl",["$scope",function(e){e.pageClass="stats"}]).controller("AstucesCtrl",["$scope",function(e){e.pageClass="astuces"}]).controller("FaqCtrl",["$scope",function(e){e.pageClass="faq"}]).controller("ShopCtrl",["$scope",function(e){e.pageClass="shop"}]),gulyApp.controller("astucesCtrl",["$scope","$http",function(e,t){function r(e,t){return Math.floor(Math.random()*(t-e))+e}e.astuces=[],t.get("app-data/astuces.json").success(function(t){e.astuces=t;var o=r(0,e.astuces.length);e.randomAstuce=e.astuces[o].astuce}).error(function(e){console.log("attention, erreur: "+e)})}]),gulyApp.controller("faqitemCtrl",["$scope","$http",function(e,t){e.faq=[],t.get("app-data/faq_items.json").success(function(t){e.faq=t}).error(function(e){console.log("attention, erreur: "+e)})}]),gulyApp.controller("profilformCtrl",["$scope","localStorageService",function(e,t){this.profil={},e.notif=null!==t.get("notif")?t.get("notif"):!0,e.smart=null!==t.get("smart")?t.get("smart"):!1,e.submitForm=function(e){e&&(logged=!0,console.log("formulaire envoyé"),t.set("logged",logged))}}]),gulyApp.controller("contactformCtrl",function(e){this.contact={},e.submitForm=function(e){e&&console.log("formulaire envoyé")}}),waterMeterModule.controller("waterMeterController",["$scope","$element","$window","localStorageService","$interval",function(e,t,r,o,l){function n(e){TweenMax.to(c,0,{height:levelHeight+"%"})}function a(e){o.set("wnToDrink",e)}var i=o.get("wnResult");if(null!==o.get("wnToDrink"))var s=o.get("wnToDrink");else s=a(i);var c=(t.find(".water-meter__round-wrapper"),t.find(".water-meter__level"));e.wnToDrink=s,levelHeight=s/i*100,n(levelHeight);var u=o.get("drinkSize")?JSON.parse(o.get("drinkSize")):!1;e.drinkSize={},e.drinkSize.small=u.small?u.small:125,e.drinkSize.med=u.med?u.med:250,e.drinkSize.large=u.large?u.large:330,e.updateToDrink=function(t){s=o.get("wnToDrink");var r=s-t;if(r>0)r=r,l(function(){e.wnToDrink=e.wnToDrink-t/10},100,10);else if(0>r){var a=e.wnToDrink/10;l(function(){e.wnToDrink=e.wnToDrink-a},100,10),r=0}levelHeight=r/i*100,n(levelHeight),o.set("wnToDrink",r),console.log(typeof e.wnToDrink)}}]),weatherControllers.controller("GetWeatherCtrl",["$scope","weatherApi",function(e,t){e.currentTime=moment().format("h:mm a"),t.getLocation().then(function(r){t.getWeeklyWeather(r.data.city+","+r.data.country_code).then(function(t){e.data=t.data,e.data.list.length&&e.data.list.forEach(function(e,t){var r=moment(1e3*e.dt);e.dt={day:r.format("ddd")},moment().format("d")==r.format("d")&&(e.dt.today=!0)})})})}]),weatherServices.factory("weatherApi",["myHttp",function(e){return{getLocation:function(){return e.jsonp("http://muslimsalat.com/daily.json?callback=JSON_CALLBACK")},getWeeklyWeather:function(t){return e.get("http://api.openweathermap.org/data/2.5/forecast/daily?q="+t+"&mode=json&units=metric")}}}]),weatherServices.factory("myHttp",["$http","myCache",function(e,t){var r={cache:t,dataType:"json"},o="2f105d521c5bb6af5e35da3eb53ce954";return{config:r,get:function(t,r,l){return e.get(t+"&APPID="+o,this.config)},getLocal:function(t,r,o){return e.get(t)},jsonp:function(t,r,o){return e.jsonp(t,this.config)}}}]),weatherServices.factory("myCache",function(e){return e("myCache",{capacity:100})}),gulyApp.controller("chartController",["$scope","$http","localStorageService",function(e,t,r){var o=new Date,l=o.getDate(),n=o.getMonth()+1,a=o.getFullYear();10>l&&(l="0"+l),10>n&&(n="0"+n),o=n+"/"+l+"/"+a,console.log(o);var i="rgb(0, 119, 230)",s="rgb(11, 46, 88)",c="rgb(102, 229, 209)",u="rgb(255, 255, 255)",g="rgba(0, 0, 0, 0)",p='"misoregular", "Arial Narrow","Helvetica Condensed", Helvetica, Arial, sans-serif';e.data=JSON.parse(r.get("chartsData")),e.options={scaleBeginAtZero:!0,scaleFontFamily:p,scaleFontSize:14,scaleFontColor:u,scaleLineColor:u,scaleShowVerticalLines:!1,responsive:!0,maintainAspectRatio:!1,tooltipFillColor:s,tooltipFontFamily:p,tooltipFontSize:24,tooltipTitleFontFamily:p,tooltipTitleFontSize:18,tooltipYPadding:12,tooltipXPadding:12,tooltipCornerRadius:5,multiTooltipTemplate:"<%= value %> litres",scaleGridLineWidth:1,bezierCurve:!0,bezierCurveTension:.5,pointDot:!0,pointDotRadius:2,pointDotStrokeWidth:2,pointHitDetectionRadius:20,datasetStrokeWidth:6};var f={labels:["lundi","mardi","mercredi","jeudi","vendredi","samedi","dimanche"],datasets:[{label:"objectif quotidien",fillColor:u,strokeColor:g,pointColor:g,pointStrokeColor:g,pointHighlightFill:g,pointHighlightStroke:g,data:[1.8,1.8,1.8,1.8,2.4,1.8,1.8]},{label:"Quantité bue",fillColor:g,strokeColor:c,pointColor:i,pointStrokeColor:s,pointHighlightFill:c,pointHighlightStroke:i,data:[1.2,1.4,1.3,1.6,2.6,1.8,1.8]}]};r.set("chartsData",JSON.stringify(f))}]),gulyApp.controller("badgesCtrl",["$scope","$http",function(e,t){e.badges=[],t.get("app-data/badges.json").success(function(t){e.badges=t}).error(function(e){console.log("attention, erreur: "+e)})}]),waterMeterModule.directive("gulWaterMeter",function(){return{restrict:"E",templateUrl:"widgets/water-meter.html",controller:"waterMeterController"}}),gooeyMenuModule.directive("gulGooeyMenu",function(){return{restrict:"E",templateUrl:"widgets/gooey-menu.html"}}),mainNavModule.directive("gulMainNavModule",function(){return{restrict:"E",templateUrl:"widgets/main-nav.html"}}),weatherControllers.directive("gulWeather",function(){return{restrict:"E",templateUrl:"widgets/weather.html",controller:"GetWeatherCtrl"}}),formControllers.directive("profilForm",function(){return{restrict:"E",templateUrl:"widgets/profil-form.html",controller:"profilformCtrl",controllerAs:"profilform"}}),gulyApp.directive("slickSlider",function(){return{restrict:"A",scope:{data:"="},link:function(e,t,r){var o=!1;e.$watch("data",function(l,n){l.length>0&&!o&&($(t).slick(e.$eval(r.slickSlider)),o=!0)})}}}),sharingModule.directive("sharingButtons",function(){return{restrict:"E",templateUrl:"widgets/sharing-buttons.html"}}),gulyFiltersModule.filter("range",function(){return function(e,t,r){t=parseInt(t),r=parseInt(r);for(var o=t;r>=o;o++)e.push(o);return e}}).filter("litres",["$filter",function(e){return function(t,r){var o=e("number");return r?"ml"===r?(t=t,t+=" ml"):"cl"===r?(t/=10,t+=" cl"):"dl"===r&&(t/=100,t+=" dl"):(t/=1e3,t=o(t,2),t+=" l"),t}}]).filter("temp",["$filter",function(e){return function(t,r){r||(r=1);var o=e("number");return o(t,r)+"°C"}}]);
//# sourceMappingURL=app.min.js.map